<!-- 7:21am - 5/17 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <title>To Do List</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="doc">
        <h1 id="td">To Do List - All Tasks</h1>
        <h1 id="ct">To Do List - Completed Tasks</h1>
        <h1 id="ict">To Do List - Incompleted Tasks</h1>
        <h2 id="rio">REMOVING ITEM ON</h2>

        <p id="stats"></p>

        <form method="POST" id="addTaskForm" class="addTask">
            <input type="text" id="taskTitle" placeholder="Task Title..." class="addTask" required>
            <button type="button" id="addTaskButton">Add</button>
            <button type="button" id="clear">Clear List</button>
            <button type="button" id="removeItem">Remove Item</button>
            <br>
            <button type="button" id="showAllTasks">Show All Tasks</button>
            <button type="button" id="showRed">Show Incompleted Tasks</button>
            <button type="button" id="showGreen">Show Completed Tasks</button>
        </form>

        <p class="lines" id="lines"></p>

        <ul id="list"></ul>

        <ul id="red"></ul>

        <ul id="green"></ul>

    </div>

    <script>
        ////
        const taskArray = [];
        completed = false;
        selected = false;
        remove = false;
        const red = [];
        const green = [];
        ////

        ////
        function addTask() {
            let eventName = document.getElementById("taskTitle").value;
            if (eventName == "") {
                alert("Task Cannot Be Empty")
                return;
            }
            for(let i = 0; i < taskArray.length; ++i){
                if(taskArray[i] == eventName){
                    alert("Cannot add duplicates to list");
                    return;
                }
            }
            taskArray.push(eventName);
            addTaskToRed(eventName);

            let li = document.createElement("li");
            let tag = document.createTextNode(eventName);
            li.id = eventName;
            li.className = "red";
            li.appendChild(tag);
            document.getElementById("list").append(li);
            document.getElementById(li.id).addEventListener("click", clicked);

            console.log("1: RedL :" + red.length + " GreenL :" + green.length);
            document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
        }
        ////

        ////
        function addTaskToRed(eventName) {
            red.push(eventName);
            let li = document.createElement("li");
            let tag = document.createTextNode(eventName);
            li.id = eventName + "r";
            li.className = "red";
            li.appendChild(tag);
            document.getElementById("red").append(li);
        }
        ////

        ////
        function addTaskToGreen(eventName) {
            green.push(eventName);
            let li = document.createElement("li");
            let tag = document.createTextNode(eventName);
            li.id = eventName + "g";
            li.className = "green";
            li.appendChild(tag);
            document.getElementById("green").append(li);
        }
        ////

        ////
        function removeFromRed(eventName) {
            if (red.length >= 1) {
                const element = document.getElementById(eventName + "r");
                element.remove();
                red.length -= 1;
            }
            // element.remove();

            console.log("2: RedL :" + red.length + " GreenL :" + green.length);
            document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
        }
        ////

        ////
        function removeFromGreen(eventName) {
            if (green.length >= 1) {
                const element = document.getElementById(eventName + "g");
                element.remove();
                green.length -= 1;
                // alert("removed from green");
            }
            console.log("3: RedL :" + red.length + " GreenL :" + green.length);
            document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
        }
        ////

        ////
        function clicked() {
            // alert("clicked");
            name = this.id;
            classs = this.className;
            // if(this.className == "red"){
            if (this.className == "green") {
                completed = true;
            }
            else {
                completed = false;
            }
            if (remove) {
                if(completed){
                    removeFromGreen(name);
                }
                else{
                    removeFromRed(name);
                }
                removeFromTaskArray(name);
                checkRemove();
            }
            else {
                if (completed) {
                    //False
                    //This.className = red
                    console.log(completed);
                    console.log(name);
                    console.log(classs);
                    this.className = "red";

                    addTaskToRed(name);
                    removeFromGreen(name);

                    document.getElementById(name).style.color = "#cd0000";
                    document.getElementById(name).style.textDecoration = "none";

                    console.log("4: RedL :" + red.length + " GreenL :" + green.length);
                    document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
                    console.log("end of IF");
                }
                else {
                    // False
                    //This.className = green
                    console.log(completed);
                    console.log(name);
                    console.log(classs);
                    this.className = "green";

                    addTaskToGreen(name);
                    removeFromRed(name);

                    document.getElementById(name).style.color = "#6acd00";
                    document.getElementById(name).style.textDecoration = "line-through";

                    console.log("5: RedL :" + red.length + " GreenL :" + green.length);
                    document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
                    console.log("end of else");
                }
            }
        }
        ////

        ////
        function clearList() {
            if (taskArray.length > 0) {
                taskArray.splice(0, taskArray.length);
                document.getElementById("list").innerHTML = "";
                taskArray.splice(0, red.length);
                document.getElementById("red").innerHTML = "";
                taskArray.splice(0, green.length);
                document.getElementById("green").innerHTML = "";
                red.length = 0;
                green.length = 0;

                console.log("6: RedL :" + red.length + " GreenL :" + green.length);
                document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;

            }
            else {
                alert("Cannot clear an empty list");
                return;
            }
        }
        ////

        ////
        function removeItem() {
            console.log("remove");
            remove = !remove;
            checkRemove();
        }
        ////

        function checkRemove(){
            if(remove){
                document.getElementById("rio").style.display = "block";
            }
            else{
                document.getElementById("rio").style.display = "none";
            }
        }

        ////
        function removeFromTaskArray(eventName) {
            console.log("removing from task array");
            // removeFromGreen(eventName);
            // removeFromRed(eventName);

            if (taskArray.length >= 1) {
                const element = document.getElementById(eventName);
                element.remove();
                taskArray.length -= 1;
            }
            remove = false;
            console.log("3: RedL :" + red.length + " GreenL :" + green.length);
            document.getElementById("stats").innerHTML = "Incomplete: " + red.length + " | Complete: " + green.length;
        }
        ////

        ////
        function showAllTasks() {
            document.getElementById("list").style.display = "block";
            document.getElementById("red").style.display = "none";
            document.getElementById("green").style.display = "none";
            document.getElementById("td").style.display = "block";
            document.getElementById("ct").style.display = "none";
            document.getElementById("ict").style.display = "none";
        }
        function showRed() {
            document.getElementById("list").style.display = "none";
            document.getElementById("red").style.display = "block";
            document.getElementById("green").style.display = "none";
            document.getElementById("td").style.display = "none";
            document.getElementById("ict").style.display = "block";
            document.getElementById("ct").style.display = "none";
        }
        function showGreen() {
            document.getElementById("list").style.display = "none";
            document.getElementById("red").style.display = "none";
            document.getElementById("green").style.display = "block";
            document.getElementById("td").style.display = "none";
            document.getElementById("ict").style.display = "none";
            document.getElementById("ct").style.display = "block";
        }
        ////

        ////
        document.getElementById("addTaskButton").addEventListener("click", addTask);
        document.getElementById("clear").addEventListener("click", clearList);
        document.getElementById("showAllTasks").addEventListener("click", showAllTasks);
        document.getElementById("showRed").addEventListener("click", showRed);
        document.getElementById("showGreen").addEventListener("click", showGreen);
        document.getElementById("removeItem").addEventListener("click", removeItem);

        document.getElementById("green").style.display = "none";
        document.getElementById("red").style.display = "none";
        document.getElementById("list").style.display = "block";
        document.getElementById("td").style.display = "block";
        document.getElementById("ct").style.display = "none";
        document.getElementById("ict").style.display = "none";
        document.getElementById("rio").style.display = "none";
        ////


    </script>
</body>

</html>